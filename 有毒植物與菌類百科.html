<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¿ æœ‰æ¯’æ¤ç‰©èˆ‡èŒé¡ç™¾ç§‘ - 50ç¨®æ“´å……ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f0f7f4; }
        .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .plant-img-container { position: relative; min-height: 300px; background: #e2e8f0; border-radius: 1.5rem; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        .shimmer { background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
    </style>
</head>
<body class="min-h-screen pb-12">

    <header class="bg-emerald-900 text-white py-10 px-4 shadow-xl mb-8">
        <div class="max-w-6xl mx-auto text-center">
            <h1 class="text-4xl font-bold mb-3">ğŸŒ¿ æœ‰æ¯’æ¤ç‰©èˆ‡èŒé¡äº’å‹•ç™¾ç§‘</h1>
            <p class="text-emerald-200 text-lg">AI å°ˆæ¥­åˆ†æç³»çµ± Â· 50 ç¨®å±éšªç‰©ç¨®æ”¶éŒ„</p>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4">
        <!-- Search Section -->
        <section class="mb-10">
            <div class="glass-card p-8 rounded-3xl shadow-lg border border-emerald-100">
                <h2 class="text-xl font-bold mb-4 text-emerald-800 flex items-center gap-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    æ™ºæ…§ç‰©ç¨®æŸ¥è©¢
                </h2>
                <div class="flex flex-col md:flex-row gap-4">
                    <input type="text" id="searchInput" placeholder="è¼¸å…¥ç‰©ç¨®åç¨±ï¼Œä¾‹å¦‚ï¼šè˜‡éµã€æ–·è…¸è‰..." 
                        class="flex-1 px-6 py-4 rounded-2xl border-2 border-emerald-50 focus:border-emerald-500 outline-none transition-all text-lg shadow-sm">
                    <button id="searchBtn" onclick="searchPlant()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-10 py-4 rounded-2xl transition-all font-bold text-lg shadow-md flex items-center justify-center gap-2">
                        <span id="btnText">å•Ÿå‹• AI æœå°‹</span>
                        <div id="loader" class="hidden animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"></div>
                    </button>
                </div>
                <div id="searchResult" class="mt-8 hidden p-8 bg-white rounded-3xl border border-emerald-100 shadow-inner"></div>
            </div>
        </section>

        <!-- Reference Grid -->
        <section>
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
                    <span class="bg-emerald-100 p-2 rounded-lg text-emerald-700 text-xl">ğŸ“–</span>
                    å±éšªç‰©ç¨®åƒè€ƒç›®éŒ„ (50é …)
                </h2>
            </div>
            <div id="plantGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
        </section>
    </main>

    <script>
        const apiKey = "AIzaSyBBSzGH5JOGkGRezckcBDnVu8BVlWqdDCM";

        // æ“´å……è‡³ 50 ç¨®ç‰©ç¨®è³‡æ–™
        const plantData = [
            { name: "å¤¾ç«¹æ¡ƒ", category: "plant", toxicity: "æ¥µé«˜", symptom: "å¿ƒå¾‹ä¸æ•´ã€å˜”å" },
            { name: "æ¯’è …å‚˜", category: "fungi", toxicity: "é«˜", symptom: "å¹»è¦ºã€è‚Œè‚‰æŠ½æ" },
            { name: "æ›¼é™€ç¾…", category: "plant", toxicity: "é«˜", symptom: "ç³å­”æ”¾å¤§ã€æ„è­˜ä¸æ¸…" },
            { name: "çƒé ­", category: "plant", toxicity: "æ¥µé«˜", symptom: "å‘¼å¸è¡°ç«­ã€è‡´å‘½" },
            { name: "æ­»å¸½è‡", category: "fungi", toxicity: "æ¥µé«˜", symptom: "åš´é‡è‚è…è¡°ç«­" },
            { name: "å§‘å©†èŠ‹", category: "plant", toxicity: "ä¸­", symptom: "çš®è†šç´…è…«ã€å£éƒ¨ç¼ç†±" },
            { name: "è“–éº»", category: "plant", toxicity: "æ¥µé«˜", symptom: "å‡è¡€ã€å¤šå™¨å®˜è¡°ç«­" },
            { name: "è˜‡éµ", category: "plant", toxicity: "é«˜", symptom: "è‚è¡°ç«­ã€ç¥ç¶“æ¯’æ€§" },
            { name: "é¦¬éŒ¢å­", category: "plant", toxicity: "æ¥µé«˜", symptom: "æŠ½æã€è‚Œè‚‰åƒµç¡¬" },
            { name: "æµ·æª¬æœ", category: "plant", toxicity: "é«˜", symptom: "å¿ƒè‡Ÿæ¯’æ€§ã€è‡´æ­»" },
            { name: "é•·æ˜¥èŠ±", category: "plant", toxicity: "ä¸­é«˜", symptom: "è‚Œè‚‰ç„¡åŠ›ã€ç™½è¡€çƒæ¸›å°‘" },
            { name: "æ–·è…¸è‰ (å¤§èŒ¶è—¥)", category: "plant", toxicity: "æ¥µé«˜", symptom: "ç—™æ”£ã€å‘¼å¸éº»ç—º" },
            { name: "éˆ´è˜­", category: "plant", toxicity: "é«˜", symptom: "è„ˆææ¸›æ…¢ã€çœ©æšˆ" },
            { name: "æ¯›åœ°é»ƒ", category: "plant", toxicity: "é«˜", symptom: "è¦–åŠ›æ¨¡ç³Šã€å¿ƒè·³ç´Šäº‚" },
            { name: "æœéµ‘èŠ±", category: "plant", toxicity: "ä¸­", symptom: "å˜”åã€è¡€å£“ä¸‹é™" },
            { name: "é¢¨ä¿¡å­", category: "plant", toxicity: "ä¸­", symptom: "æ¥è§¸æ€§çš®ç‚ã€è…¹ç—›" },
            { name: "æ°´ä»™èŠ±", category: "plant", toxicity: "ä¸­", symptom: "è…¹ç€‰ã€å˜”å" },
            { name: "å¤§æˆŸ", category: "plant", toxicity: "ä¸­é«˜", symptom: "çš®è†šç™¼æ³¡ã€æ¶ˆåŒ–é“ç‚" },
            { name: "éº’éºŸèŠ±", category: "plant", toxicity: "ä¸­", symptom: "çš®è†šåˆºç—›ã€çœ¼éƒ¨ç™¼ç‚" },
            { name: "è–èª•ç´…", category: "plant", toxicity: "ä½ä¸­", symptom: "è…¹ç—›ã€çš®è†šç´…ç–¹" },
            { name: "è®Šè‘‰æœ¨", category: "plant", toxicity: "ä½ä¸­", symptom: "è…¹ç€‰ã€å£è…”ç¼ç†±" },
            { name: "å¸¸æ˜¥è—¤", category: "plant", toxicity: "ä¸­", symptom: "å–‰åš¨è…«è„¹ã€å‘¼å¸å›°é›£" },
            { name: "è¬å¹´é’", category: "plant", toxicity: "ä¸­", symptom: "å¤±è²ã€å£èˆŒè…«ç—›" },
            { name: "é¾œèƒŒèŠ‹", category: "plant", toxicity: "ä¸­", symptom: "é»è†œç¼ç†±ã€ç™¼ç‚" },
            { name: "ç™½é¶´èŠ‹", category: "plant", toxicity: "ä¸­", symptom: "ååš¥å›°é›£ã€å£è…”è…«ç—›" },
            { name: "é»ƒé‡‘è‘›", category: "plant", toxicity: "ä½ä¸­", symptom: "å˜”åã€æµå£æ°´" },
            { name: "ä»™å®¢ä¾†", category: "plant", toxicity: "ä¸­", symptom: "åŠ‡çƒˆå˜”åã€æŠ½æ" },
            { name: "ç™¾åˆèŠ± (å°è²“æœ‰æ¥µæ¯’)", category: "plant", toxicity: "ä¸­é«˜", symptom: "è…è‡Ÿè¡°ç«­" },
            { name: "å­¤æŒºèŠ±", category: "plant", toxicity: "ä¸­", symptom: "æµæ¶ã€éœ‡é¡«" },
            { name: "ç´«è—¤", category: "plant", toxicity: "ä¸­", symptom: "èƒƒè…¸ç‚ã€è™›è„«" },
            { name: "ç¹¡çƒèŠ±", category: "plant", toxicity: "ä¸­é«˜", symptom: "è…¹ç—›ã€è¡€ä¾¿" },
            { name: "å«ç¾è‰", category: "plant", toxicity: "ä½ä¸­", symptom: "é•·æœŸæ¥è§¸è‡´è„«é«®" },
            { name: "ç›¸æ€è±†", category: "plant", toxicity: "æ¥µé«˜", symptom: "å¾ªç’°è¡°ç«­ã€è‡´å‘½" },
            { name: "ç™½éµè†", category: "fungi", toxicity: "æ¥µé«˜", symptom: "è‚æ¯’æ€§ã€è‡´æ­»ç‡é«˜" },
            { name: "é±—æŸ„ç™½éµè†", category: "fungi", toxicity: "æ¥µé«˜", symptom: "å…§è‡Ÿåš´é‡å—æ" },
            { name: "ç´…ç¶²ç‰›è‚èŒ", category: "fungi", toxicity: "ä¸­", symptom: "å¹»è¦ºã€èƒƒè…¸ä¸é©" },
            { name: "æ¯’ç´…è‡", category: "fungi", toxicity: "ä¸­", symptom: "è…¹ç—›ã€åš´é‡è…¹ç€‰" },
            { name: "è±¹æ–‘æ¯’éµè†", category: "fungi", toxicity: "æ¥µé«˜", symptom: "ç¥ç¶“éŒ¯äº‚ã€æ˜è¿·" },
            { name: "ç«ç„°èŒ¸", category: "fungi", toxicity: "æ¥µé«˜", symptom: "è§¸æ‘¸å¯è‡´çš®è†šçˆ›ã€å…§è‡Ÿè¡°ç«­" },
            { name: "å¤§é’è¤¶å‚˜ (ç¶ è¤¶è‡)", category: "fungi", toxicity: "ä¸­é«˜", symptom: "å™å¿ƒã€è¡€ä¾¿" },
            { name: "è±¬ç± è‰ (æ¶²é«”ç„¡æ¯’ï¼Œä½†ç”Ÿé•·ç’°å¢ƒå¯èƒ½æœ‰æ¯’)", category: "plant", toxicity: "ä½", symptom: "ä¸€èˆ¬ç„¡ç›´æ¥ä¸­æ¯’ç—‡ç‹€" },
            { name: "è¦‹è¡€å°å–‰ (ç®­æ¯’æœ¨)", category: "plant", toxicity: "æ¥µé«˜", symptom: "è¡€æ¶²å‡å›ºã€å¿ƒè‡Ÿéº»ç—º" },
            { name: "å—å¤©ç«¹", category: "plant", toxicity: "ä¸­é«˜", symptom: "è‚Œè‚‰æŠ½æã€æ˜è¿·" },
            { name: "å¤©å—æ˜Ÿ", category: "plant", toxicity: "ä¸­é«˜", symptom: "å–‰é ­è…«å¤§ã€ç™¼ç™¢" },
            { name: "æ›¼é™€ç¾…æœ¨ (æœ¨æœ¬)", category: "plant", toxicity: "é«˜", symptom: "ç¥ç¶“å¤±å¸¸ã€å‘¼å¸ç·©æ…¢" },
            { name: "æ¯’åƒ", category: "plant", toxicity: "æ¥µé«˜", symptom: "éº»ç—ºã€è‡´æ­»" },
            { name: "ç§‹æ°´ä»™", category: "plant", toxicity: "é«˜", symptom: "å¤šå™¨å®˜åŠŸèƒ½å—æ" },
            { name: "æ´‹åœ°é»ƒ", category: "plant", toxicity: "é«˜", symptom: "å¿ƒè¡€ç®¡åŠŸèƒ½ç•°å¸¸" },
            { name: "æ²™æ¼ ç«ç‘°", category: "plant", toxicity: "ä¸­é«˜", symptom: "å¿ƒè·³æ¸›æ…¢ã€å˜”å" },
            { name: "é›æ¯ç ", category: "plant", toxicity: "æ¥µé«˜", symptom: "é‡åº¦è„«æ°´ã€ç™¼ç‡’" }
        ];

        async function fetchImage(plantName) {
            const prompt = `A highly detailed, professional botanical scientific illustration of ${plantName}, centered, sharp focus, white background.`;
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-001:predict?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        instances: [{ prompt: prompt }],
                        parameters: { sampleCount: 1 }
                    })
                });
                const data = await response.json();
                if (data.predictions && data.predictions[0].bytesBase64Encoded) {
                    return `data:image/png;base64,${data.predictions[0].bytesBase64Encoded}`;
                }
            } catch (e) { console.warn("AI ç”Ÿæˆå¤±æ•—..."); }

            try {
                const wikiUrl = `https://zh.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(plantName)}`;
                const response = await fetch(wikiUrl);
                const data = await response.json();
                if (data.thumbnail?.source) return data.thumbnail.source;
                if (data.originalimage?.source) return data.originalimage.source;
            } catch (e) { console.error("Wiki å½±åƒç²å–å¤±æ•—"); }
            return null;
        }

        async function searchPlant(queryName) {
            const input = document.getElementById('searchInput');
            const query = queryName || input.value.trim();
            if (!query) return;

            const resultArea = document.getElementById('searchResult');
            const loader = document.getElementById('loader');
            const btnText = document.getElementById('btnText');
            const searchBtn = document.getElementById('searchBtn');

            resultArea.classList.remove('hidden');
            resultArea.innerHTML = `
                <div class="flex flex-col items-center py-16">
                    <div class="w-full max-w-lg h-80 shimmer rounded-3xl mb-8"></div>
                    <p class="text-emerald-700 font-bold animate-pulse text-lg">AI æ­£åœ¨æ·±åº¦æª¢ç´¢ã€Œ${query}ã€çš„è³‡æ–™...</p>
                </div>
            `;
            loader.classList.remove('hidden');
            btnText.textContent = "æœå°‹ä¸­";
            searchBtn.disabled = true;

            try {
                const textResponse = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `è«‹è©³ç´°ä»‹ç´¹ã€Œ${query}ã€ï¼šåŒ…å«1.å­¸åèˆ‡ç§‘åˆ¥ 2.é—œéµç‰¹å¾µ 3.æ¯’æ€§æˆåˆ† 4.ä¸­æ¯’ç—‡ç‹€ 5.æ€¥æ•‘èˆ‡æ•‘è­·ã€‚è«‹ä½¿ç”¨ç¹é«”ä¸­æ–‡ï¼Œæ ¼å¼æ¸…æ™°ã€‚` }] }]
                    })
                });

                const textData = await textResponse.json();
                const aiText = textData.candidates?.[0]?.content?.parts?.[0]?.text || "æš«ç„¡è©³ç´°è³‡æ–™ã€‚";
                const imgUrl = await fetchImage(query);

                const formattedText = aiText.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong class="text-emerald-900">$1</strong>');
                const imageContent = imgUrl 
                    ? `<img src="${imgUrl}" class="w-full h-full object-cover rounded-2xl shadow-xl transition-all duration-500 hover:scale-105" onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">`
                    : `<div class="text-emerald-300 italic text-center p-8">ç„¡æ³•è¼‰å…¥å½±åƒ</div>`;

                resultArea.innerHTML = `
                    <div class="flex flex-col lg:flex-row gap-10">
                        <div class="lg:w-2/5 w-full">
                            <div class="plant-img-container shadow-inner border-4 border-white bg-white">
                                ${imageContent}
                            </div>
                        </div>
                        <div class="lg:w-3/5 w-full">
                            <h3 class="text-4xl font-extrabold text-emerald-950 mb-6">${query}</h3>
                            <div class="prose max-w-none text-gray-700 leading-loose text-lg">
                                ${formattedText}
                            </div>
                        </div>
                    </div>
                `;

            } catch (error) {
                resultArea.innerHTML = `<div class="p-8 bg-red-50 text-red-700 rounded-3xl border">æœå°‹å‡ºéŒ¯ï¼š${error.message}</div>`;
            } finally {
                loader.classList.add('hidden');
                btnText.textContent = "å•Ÿå‹• AI æœå°‹";
                searchBtn.disabled = false;
            }
        }

        function renderPlants() {
            const grid = document.getElementById('plantGrid');
            grid.innerHTML = '';
            plantData.forEach(p => {
                const card = document.createElement('div');
                card.className = 'glass-card p-6 rounded-3xl border border-white hover:border-emerald-500 hover:shadow-2xl transition-all cursor-pointer group';
                card.onclick = () => {
                    document.getElementById('searchInput').value = p.name;
                    searchPlant(p.name);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                };
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded"># ${p.category}</span>
                        <span class="text-[10px] font-bold text-red-600">æ¯’æ€§ï¼š${p.toxicity}</span>
                    </div>
                    <h3 class="font-bold text-lg text-gray-800 mb-1 group-hover:text-emerald-700">${p.name}</h3>
                    <p class="text-xs text-gray-500 line-clamp-1">${p.symptom}</p>
                `;
                grid.appendChild(card);
            });
        }

        window.onload = renderPlants;
    </script>
</body>
</html>
