<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è±†è£½å“è·äººæ¯”ä¾‹è¨ˆç®—å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fdf6e3;
        }
        .card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        .mode-active {
            background-color: #d97706 !important;
            color: white !important;
            transform: scale(1.05);
        }
        .warning-box {
            border: 1px solid #fee2e2;
            background-color: #fef2f2;
            padding: 0.75rem;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            color: #991b1b;
        }
        .step-num {
            background: #d97706;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold text-amber-900 mb-2">ğŸ¶ è±†è£½å“è·äººæ¯”ä¾‹è¨ˆç®—å™¨</h1>
            <p class="text-amber-700">ç²¾æº–æ¯”ä¾‹ x è·äººå·¥æ³• = å®Œç¾çš„è±†å‘³è¡¨ç¾</p>
        </div>

        <!-- Mode Selector -->
        <div class="flex justify-center gap-3 mb-8">
            <button id="mode-douhua" onclick="setMode('douhua')" class="px-8 py-3 rounded-xl font-bold bg-white text-amber-800 shadow-sm transition-all mode-active">ğŸ® è·äººè±†èŠ± (çŸ³è†å·¥æ³•)</button>
            <button id="mode-tofu" onclick="setMode('tofu')" class="px-8 py-3 rounded-xl font-bold bg-white text-amber-800 shadow-sm transition-all">ğŸ§Š å‚³çµ±è±†è… (é¹½æ»·å·¥æ³•)</button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Column: Inputs & Ratios -->
            <div class="lg:col-span-1 space-y-6">
                <div class="card p-6 border-t-4 border-amber-500">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ä¹¾é»ƒè±†é‡é‡ (g)</label>
                    <input type="number" id="soybeanInput" value="300" min="50" step="50" oninput="calculate()"
                        class="w-full px-4 py-3 rounded-xl border-2 border-amber-100 focus:border-amber-500 focus:outline-none text-2xl font-bold text-amber-900 transition-all">
                </div>

                <div class="card p-6 border-l-4 border-blue-400">
                    <h3 class="font-bold text-blue-800 mb-4 flex items-center">
                        <span class="mr-2">ğŸ”¥</span> ç…®æ¼¿æ¯”ä¾‹
                    </h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between border-b pb-2">
                            <span class="text-gray-600">æ‰“æ¼¿ç¸½ç”¨æ°´</span>
                            <span class="font-bold text-blue-600"><span id="res-water">2100</span> ml</span>
                        </div>
                        <div class="warning-box mt-2">
                            <strong>è·äººæé†’ï¼š</strong> ç…®æ¼¿æ™‚è‹¥å‡ºç¾å¤§é‡æ³¡æ²«å‘ä¸Šè¡æ˜¯ã€Œå‡æ²¸ã€ï¼Œæ­¤æ™‚è›‹ç™½è³ªå°šæœªç†Ÿé€ï¼Œå‹™å¿…è½‰æ¥µå°ç«ä¸¦çºŒç…® 5-8 åˆ†é˜ã€‚
                        </div>
                    </div>
                </div>

                <div class="card p-6 border-l-4 border-emerald-400">
                    <h3 class="font-bold text-emerald-800 mb-4 flex items-center">
                        <span class="mr-2">ğŸ§ª</span> å‡å›ºåŠ‘æ¯”ä¾‹
                    </h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between border-b pb-2">
                            <span id="label-coagulant" class="text-gray-600">ç†ŸçŸ³ç° (é£Ÿç”¨çŸ³è†)</span>
                            <span class="font-bold text-emerald-600"><span id="res-coagulant">4</span> g</span>
                        </div>
                        <div id="row-starch" class="flex justify-between border-b pb-2">
                            <span class="text-gray-600">åœ°ç“œç²‰ (å¢åŠ Qå½ˆåº¦)</span>
                            <span class="font-bold text-emerald-600"><span id="res-starch">30</span> g</span>
                        </div>
                        <div class="flex justify-between border-b pb-2">
                            <span class="text-gray-600">èª¿å’Œå†·é–‹æ°´</span>
                            <span class="font-bold text-gray-800"><span id="res-mixwater">100</span> ml</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Procedure -->
            <div class="lg:col-span-2">
                <div class="card p-8 h-full">
                    <div id="tip-section" class="mb-8 p-4 bg-amber-50 rounded-xl border border-amber-100 text-sm italic text-amber-800">
                        <!-- Tips load here -->
                    </div>

                    <h2 class="text-2xl font-bold text-amber-900 mb-8 flex items-center">
                        <span id="procedure-icon" class="mr-3">ğŸ¥£</span> 
                        <span id="procedure-title">è©³ç´°è£½ä½œæµç¨‹</span>
                    </h2>
                    
                    <div id="procedure-steps" class="space-y-8">
                        <!-- Steps load here -->
                    </div>

                    <div class="mt-12 pt-6 border-t border-amber-100">
                        <h4 class="font-bold text-amber-900 mb-3">ğŸ› ï¸ å¿…å‚™å·¥å…·æ¸…å–®</h4>
                        <div id="tool-list" class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                            <!-- Tools load here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="text-center mt-10 text-gray-400 text-xs pb-10">
            Â© è±†è£½å“ç§‘å­¸å¯¦é©—å®¤ - å»ºè­°ä½¿ç”¨éåŸºæ”¹é»ƒè±†ä»¥ç²å¾—æœ€ä½³é¢¨å‘³
        </footer>
    </div>

    <script>
        let currentMode = 'douhua';

        function setMode(mode) {
            currentMode = mode;
            document.getElementById('mode-douhua').classList.toggle('mode-active', mode === 'douhua');
            document.getElementById('mode-tofu').classList.toggle('mode-active', mode === 'tofu');
            calculate();
        }

        function calculate() {
            const soy = parseFloat(document.getElementById('soybeanInput').value);
            if (isNaN(soy) || soy <= 0) return;

            if (currentMode === 'douhua') {
                updateDouhua(soy);
            } else {
                updateTofu(soy);
            }
        }

        function updateDouhua(soy) {
            const water = soy * 7;
            const gypsum = (soy * 0.013).toFixed(1);
            const starch = (soy * 0.1).toFixed(0);
            const mixWater = (soy * 0.33).toFixed(0);

            document.getElementById('res-water').innerText = water;
            document.getElementById('label-coagulant').innerText = "ç†ŸçŸ³ç° (é£Ÿç”¨çŸ³è†)";
            document.getElementById('res-coagulant').innerText = gypsum;
            document.getElementById('row-starch').style.display = 'flex';
            document.getElementById('res-starch').innerText = starch;
            document.getElementById('res-mixwater').innerText = mixWater;

            document.getElementById('tip-section').innerText = "ã€Œæ²–æ¼¿ã€æ˜¯è±†èŠ±æˆæ•—çš„éˆé­‚ï¼Œé—œéµåœ¨æ–¼ç¬é–“ç”¢ç”Ÿçš„æ¹æµï¼Œè®“çŸ³è†æ¶²èˆ‡ç†±è±†æ¼¿åœ¨ 1 ç§’å…§å®Œç¾æ··åˆã€‚";
            document.getElementById('procedure-icon').innerText = "ğŸ®";
            document.getElementById('procedure-title').innerText = "è·äººç´šè±†èŠ±è£½ä½œå·¥åº";
            
            document.getElementById('procedure-steps').innerHTML = `
                ${stepTpl(1, "æµ¸æ³¡èˆ‡ç´°ç£¨", "é¸ç”¨éåŸºæ”¹é»ƒè±†ï¼Œæµ¸æ³¡ 6-8 å°æ™‚è‡³è±†èŠ½è™•å¾®çªã€‚ä»¥ 1:7 æ¯”ä¾‹åŠ æ°´ç ”ç£¨ï¼Œä¸¦ä½¿ç”¨å…©å±¤å¯†ç¹”è±†æ¼¿å¸ƒå¼·åŠ›æ“ ä¹¾æ¿¾æ¸£ã€‚å»ºè­°æ¿¾å®Œå¾Œã€Œå†æ¿¾ä¸€éã€ä»¥ç¢ºä¿ç„¡æ®˜æ¸£ã€‚")}
                ${stepTpl(2, "æ…¢ç«ç†¬æ¼¿", "å°‡ç”Ÿè±†æ¼¿å¤§ç«ç…®æ²¸ï¼Œå‡ºç¾å¤§é‡æ³¡æ²«æ™‚è½‰æ¥µå°ç«ï¼Œæ’‡é™¤æ³¡æ²«ä¸¦çºŒç…® 5-8 åˆ†é˜ã€‚é€™èƒ½å¾¹åº•ç…®ç†Ÿçš‚ç´ ï¼Œé¿å…è…¹ç€‰ä¸¦è®“è±†é¦™è½‰ç‚ºç”˜ç”œã€‚")}
                ${stepTpl(3, "ç²¾æº–é™æº«", "ç†„ç«å¾Œï¼Œå°‡è±†æ¼¿éœç½®é™æº«ã€‚ç†æƒ³æ²–æ¼¿æº«åº¦ç‚º 85Â°Cã€‚æº«åº¦éé«˜ï¼ˆ>95Â°Cï¼‰è±†èŠ±æœƒè®Šè€ã€æ»²æ°´ï¼›éä½ï¼ˆ<75Â°Cï¼‰å‰‡ç„¡æ³•å‡å›ºã€‚")}
                ${stepTpl(4, "æ‡¸æµ®æ²–æ¼¿", "å°‡çŸ³è†ã€åœ°ç“œç²‰ã€å†·é–‹æ°´åœ¨å®¹å™¨åº•éƒ¨æ”ªå‹»ã€‚æ‰‹æŒè±†æ¼¿é‹å¾ 30 å…¬åˆ†é«˜è™•ä¸€å£æ°£ã€Œæ’ã€å…¥å®¹å™¨ä¸­ã€‚æ²–å®Œå¾Œåš´ç¦æ”ªæ‹Œï¼Œåªéœ€å¿«é€Ÿæ’ˆé™¤è¡¨é¢å¤§æ³¡æ³¡ã€‚")}
                ${stepTpl(5, "éœç½®ç†Ÿæˆ", "è“‹ä¸Šé‹è“‹ä¿æº«ä¸¦éœç½® 20 åˆ†é˜ã€‚æ­¤æ™‚åš´ç¦æ™ƒå‹•ã€‚å¾…å†·å»å¾Œæ”¾å…¥å†°ç®±å†·è— 3 å°æ™‚ï¼Œè³ªåœ°æœƒè®Šå¾—æ›´åŠ ç©©å®šæ»‘é †ã€‚")}
            `;

            document.getElementById('tool-list').innerHTML = `
                <span>âœ… é«˜å¯†åº¦æ¿¾è±†æ¸£è¢‹</span>
                <span>âœ… ç´…å¤–ç·šæº«åº¦è¨ˆ</span>
                <span>âœ… ä¸é½é‹¼æ·±æ¡¶ (æ²–æ¼¿ç”¨)</span>
                <span>âœ… æ’‡æ³¡å°åŒ™æˆ–å™´æ§</span>
            `;
        }

        function updateTofu(soy) {
            const water = soy * 6;
            const nigari = (soy * 0.02).toFixed(1);
            const mixWater = (soy * 0.2).toFixed(0);

            document.getElementById('res-water').innerText = water;
            document.getElementById('label-coagulant').innerText = "å¤©ç„¶é¹½æ»· (æ¶²æ…‹æˆ–ç²‰)";
            document.getElementById('res-coagulant').innerText = nigari;
            document.getElementById('row-starch').style.display = 'none';
            document.getElementById('res-mixwater').innerText = mixWater;

            document.getElementById('tip-section').innerText = "è±†è…èˆ‡è±†èŠ±ä¸åŒï¼Œå®ƒéœ€è¦ã€Œæ…¢å·¥å‡ºç´°æ´»ã€ã€‚é¹½æ»·çš„æ·»åŠ æ˜¯ç‚ºäº†è®“è›‹ç™½è³ªç¶²æ ¼ç·©æ…¢æ”¶ç¸®ï¼Œæ’å‡ºæ°´åˆ†ï¼Œç•™ä¸‹æ‰å¯¦çš„è±†é¦™ã€‚";
            document.getElementById('procedure-icon').innerText = "ğŸ§Š";
            document.getElementById('procedure-title').innerText = "å¤æ³•æ¿è±†è…è£½ä½œå·¥åº";

            document.getElementById('procedure-steps').innerHTML = `
                ${stepTpl(1, "é«˜æ¿ƒåº¦ç…®æ¼¿", "ä½¿ç”¨ 1:6 çš„æ¯”ä¾‹è£½ä½œæ¿ƒè±†æ¼¿ã€‚æ¿¾æ¸£éœ€æ¯”è±†èŠ±æ›´å¾¹åº•ã€‚ç…®æ²¸å¾ŒåŒæ¨£éœ€çºŒç…® 5-8 åˆ†é˜ï¼Œç¢ºä¿è±†ä¹³å®Œå…¨ç†ŸåŒ–ã€‚")}
                ${stepTpl(2, "é™æº«èˆ‡é»æ»·", "å°‡è±†æ¼¿é™æº«è‡³ 75Â°C - 80Â°Cã€‚é¹½æ»·æ¶²åˆ† 3 æ¬¡é»å…¥ï¼šç¬¬ä¸€æ¬¡ç¹åœˆåŠ å…¥ã€ç¬¬äºŒæ¬¡åœ¨ä¸­é–“é»å…¥ã€ç¬¬ä¸‰æ¬¡é‡å°æœªå‡å›ºè™•è£œå¼·ã€‚æ¯åŠ å…¥ä¸€æ¬¡éƒ½è¦ç”¨æœ¨éŸè¼•è¼•åŠƒé–‹è±†æ¼¿ã€‚")}
                ${stepTpl(3, "ç ´èŠ±èˆ‡æ‚¶ç…®", "ç•¶å‡ºç¾é›²æœµç‹€çš„ç™½è‰²å¡Šç‹€ç‰©ï¼ˆè±†èŠ±ï¼‰èˆ‡é€æ˜å¾®é»ƒçš„æ¶²é«”ï¼ˆé»ƒæ¼¿æ°´ï¼‰åˆ†é›¢æ™‚ï¼Œåœæ­¢æ”ªå‹•ï¼Œè“‹è“‹éœç½® 15 åˆ†é˜è®“çµæ§‹å¼·å¥ã€‚")}
                ${stepTpl(4, "ä¸Šæ¨¡å£“è£½", "è±†è…æ¨¡å…·é‹ªå¥½æ¿•ç´—å¸ƒï¼Œå°‡å‡ä¹³å‡å‹»èˆ€å…¥ã€‚åŒ…å¥½ç´—å¸ƒï¼Œå£“ä¸Šé‡ç‰©ã€‚å£“ 15 åˆ†é˜ç‚ºå«©è±†è…ï¼Œå£“ 40 åˆ†é˜å‰‡ç‚ºè€è±†è…ã€‚")}
                ${stepTpl(5, "å†·æ°´å®šå‹", "å°‡è±†è…é€£åŒç´—å¸ƒè¼•è¼•ç§»å…¥ä¸€å¤§ç›†å†·æ°´ä¸­è„«æ¨¡ã€‚é€™èƒ½å†·å»æ ¸å¿ƒæº«åº¦ï¼Œä¸¦æ²–æ·¡æ®˜ç•™é¹½æ»·çš„è‹¦æ¾€å‘³ã€‚")}
            `;

            document.getElementById('tool-list').innerHTML = `
                <span>âœ… è±†è…æœ¨æ¨¡æˆ–ä¸é½é‹¼æ¨¡</span>
                <span>âœ… é£Ÿå“ç´šé€æ°£ç´—å¸ƒ</span>
                <span>âœ… å£“é‡ç‰© (å¦‚å¤§æ°´ç“¶)</span>
                <span>âœ… é•·æŸ„æœ¨éŸ</span>
            `;
        }

        function stepTpl(num, title, desc) {
            return `
                <div class="flex gap-4">
                    <div class="step-num">${num}</div>
                    <div>
                        <h4 class="font-bold text-gray-800 mb-1">${title}</h4>
                        <p class="text-sm text-gray-600 leading-relaxed">${desc}</p>
                    </div>
                </div>
            `;
        }

        window.onload = calculate;
    </script>
</body>
</html>
